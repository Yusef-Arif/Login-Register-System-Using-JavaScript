<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <section>
      <div>
        <form action="">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            required
            placeholder="Enter username"
            class=".register-input"
          />

          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            required
            placeholder="Enter email"
            class=".register-input"
          />

          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            required
            placeholder="Enter password"
            class=".register-input"
          />

          <label for="password2">Confirm Password</label>
          <input
            type="password"
            id="password2"
            required
            placeholder="Enter password again"
            class=".register-input"
          />
          <button class="registerButton" id="submit">Submit</button>
          <div class="flex">
            <p><span>OR</span> you have acount</p>
            <a href="login.html"
              ><img src="./icons/login.png" width="50px" alt=""
            /></a>
          </div>
          <p id="error"></p>
        </form>
      </div>
    </section>
    <script>
      document.getElementById("submit").addEventListener("click", function (e) {
        e.preventDefault();
        var name = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        var email = document.getElementById("email").value;
        var password2 = document.getElementById("password2").value;

        var user = localStorage.getItem("user");

        if (user) {
          var info = JSON.parse(user);
          if (info.email === email) {
            document.getElementById("error").innerHTML =
              "this Email Is Used Already, Try Another One!";
          } else {
            if (password !== password2) {
              document.getElementById("error").innerHTML =
                "The Passwords Not The Same";
            } else {
              const user = {
                name: name,
                email: email,
                password: password,
              };
              window.sessionStorage.setItem("user", JSON.stringify(user));
              localStorage.setItem("user", JSON.stringify(user));
              window.location.href = "./home.html";
            }
          }
        }
      });
    </script>
  </body>
</html>
